- content_for 'popups' do
  #add-part-popup.popup{:style => "display: none"}
    #busy.busy{:style => "display: none"}= image 'spinner.gif'
    %h3 Add Part
    - form_remote_tag(:url => page_add_part_url, :update => "pages", :position => :bottom, :loading => 'part_loading()', :complete => 'part_added()', :condition => 'valid_part_name()') do
      %div
        = hidden_field_tag 'index', @index, :id => 'part-index-field'
        = text_field_tag "part[name]", "", :id => 'part-name-field', :maxlength => 100
        = submit_tag "Add Part", :id => 'add-part-button'
      %p
        = link_to_function 'Close', "$(this).up('.popup').hide()", :class => 'close-link'

  #tag-reference-popup.popup{ :style => "display:none;" }
    %div{ :style => "float:right" }
      %label{:for=> 'search-tag-reference'} Search Tags:
      %input#search-tag-reference{ :type => "text" }/
    %h3
      Available Tags for
      %span#page-type= @page.class.display_name
    #tag-reference= tag_reference(@page.class.name)
    %p
      = link_to 'Close', '#', :class => 'close'

  #filter-reference-popup.popup{ :style => "display:none;" }
    %h3
      %span#filter-type= default_filter_name
      Reference
    #filter-reference= filter_reference(default_filter_name)
    %p
      = link_to_function 'Close', "Element.hide('filter-reference-popup')", :class => 'close-link'
  = render_region :popups